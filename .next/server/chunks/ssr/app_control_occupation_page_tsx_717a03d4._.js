module.exports=[96908,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(96313),e=a.i(3130),f=a.i(54161),g=a.i(40695),h=a.i(5522),i=a.i(88237),j=a.i(65733),k=a.i(5094),l=a.i(87682),m=a.i(21958),n=a.i(11300),o=a.i(43108);let p=(0,a.i(70106).default)("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);var q=a.i(41710),r=a.i(87532),s=a.i(84505),t=a.i(77156),u=a.i(69520),v=a.i(50981),w=a.i(17755),x=a.i(4720),y=a.i(76504),z=a.i(39622),A=a.i(85811),B=a.i(58042),C=a.i(94222),D=a.i(54419),E=a.i(59854),F=a.i(48662);let G=[{id:"OCC001",type:"采购申请",bizNo:"PR2025120301",department:"研发部",subject:"办公费用",amount:50,status:"occupied",applicant:"张三",time:"2025-12-03 09:30",remark:"采购办公设备"},{id:"OCC002",type:"报销单",bizNo:"EXP2025120301",department:"市场部",subject:"差旅费用",amount:120,status:"deducted",applicant:"李四",time:"2025-12-03 10:15",remark:"上海出差报销"},{id:"OCC003",type:"合同付款",bizNo:"CON2025120201",department:"销售部",subject:"业务招待费",amount:80,status:"occupied",applicant:"王五",time:"2025-12-02 16:00",remark:"客户招待费用"},{id:"OCC004",type:"采购申请",bizNo:"PR2025120101",department:"行政部",subject:"办公费用",amount:30,status:"released",applicant:"赵六",time:"2025-12-01 14:20",releaseTime:"2025-12-02 09:00",remark:"采购申请已取消"},{id:"OCC005",type:"报销单",bizNo:"EXP2025113001",department:"人力部",subject:"培训费用",amount:45,status:"deducted",applicant:"孙七",time:"2025-11-30 11:20",remark:"员工培训费用"}],H=[{date:"11-25",occupied:120,deducted:80,released:20},{date:"11-26",occupied:150,deducted:100,released:30},{date:"11-27",occupied:180,deducted:120,released:25},{date:"11-28",occupied:160,deducted:140,released:40},{date:"11-29",occupied:200,deducted:150,released:35},{date:"11-30",occupied:170,deducted:160,released:45},{date:"12-01",occupied:130,deducted:120,released:30},{date:"12-02",occupied:145,deducted:130,released:28},{date:"12-03",occupied:130,deducted:120,released:30}];function I(){let[a,I]=(0,c.useState)(G),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)("all"),[N,O]=(0,c.useState)("all"),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)(null),[V,W]=(0,c.useState)("list"),X=a.filter(a=>{let b=a.id.toLowerCase().includes(J.toLowerCase())||a.bizNo.toLowerCase().includes(J.toLowerCase())||a.department.includes(J)||a.applicant.includes(J),c="all"===L||a.status===L,d="all"===N||a.type===N;return b&&c&&d}),Y=a.filter(a=>"occupied"===a.status).reduce((a,b)=>a+b.amount,0),Z=a.filter(a=>"deducted"===a.status).reduce((a,b)=>a+b.amount,0),$=a.filter(a=>"released"===a.status).reduce((a,b)=>a+b.amount,0),_=a.filter(a=>"occupied"===a.status).length;return(0,b.jsx)(d.MainLayout,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"预算占用"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"管理预算的预占用、正式扣减与释放"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(u.RefreshCw,{className:"w-4 h-4 mr-2"}),"刷新"]}),(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(s.Download,{className:"w-4 h-4 mr-2"}),"导出"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl bg-warning/10 flex items-center justify-center",children:(0,b.jsx)(o.Lock,{className:"w-6 h-6 text-warning"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"预占用金额"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-warning",children:["¥",Y,"万"]})]})]})}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl bg-destructive/10 flex items-center justify-center",children:(0,b.jsx)(n.ClipboardList,{className:"w-6 h-6 text-destructive"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"已扣减金额"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-destructive",children:["¥",Z,"万"]})]})]})}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl bg-success/10 flex items-center justify-center",children:(0,b.jsx)(p,{className:"w-6 h-6 text-success"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"已释放金额"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-success",children:["¥",$,"万"]})]})]})}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center",children:(0,b.jsx)(q.Clock,{className:"w-6 h-6 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"待处理单据"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:_})]})]})})]}),(0,b.jsxs)(m.Tabs,{value:V,onValueChange:W,children:[(0,b.jsxs)(m.TabsList,{children:[(0,b.jsx)(m.TabsTrigger,{value:"list",children:"占用明细"}),(0,b.jsx)(m.TabsTrigger,{value:"trend",children:"趋势分析"})]}),(0,b.jsx)(m.TabsContent,{value:"list",className:"mt-4",children:(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsx)(e.CardTitle,{className:"text-base font-medium",children:"占用明细"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(r.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(h.Input,{placeholder:"搜索单据号/部门/申请人...",className:"pl-9 w-64",value:J,onChange:a=>K(a.target.value)})]}),(0,b.jsxs)(l.Select,{value:L,onValueChange:M,children:[(0,b.jsx)(l.SelectTrigger,{className:"w-32",children:(0,b.jsx)(l.SelectValue,{placeholder:"状态筛选"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"all",children:"全部状态"}),(0,b.jsx)(l.SelectItem,{value:"occupied",children:"预占用"}),(0,b.jsx)(l.SelectItem,{value:"deducted",children:"已扣减"}),(0,b.jsx)(l.SelectItem,{value:"released",children:"已释放"})]})]}),(0,b.jsxs)(l.Select,{value:N,onValueChange:O,children:[(0,b.jsx)(l.SelectTrigger,{className:"w-32",children:(0,b.jsx)(l.SelectValue,{placeholder:"类型筛选"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"all",children:"全部类型"}),(0,b.jsx)(l.SelectItem,{value:"采购申请",children:"采购申请"}),(0,b.jsx)(l.SelectItem,{value:"报销单",children:"报销单"}),(0,b.jsx)(l.SelectItem,{value:"合同付款",children:"合同付款"})]})]})]})]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{children:"占用编号"}),(0,b.jsx)(i.TableHead,{children:"业务类型"}),(0,b.jsx)(i.TableHead,{children:"业务单号"}),(0,b.jsx)(i.TableHead,{children:"部门"}),(0,b.jsx)(i.TableHead,{children:"预算科目"}),(0,b.jsx)(i.TableHead,{children:"申请人"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"金额(万)"}),(0,b.jsx)(i.TableHead,{className:"text-center",children:"状态"}),(0,b.jsx)(i.TableHead,{children:"占用时间"}),(0,b.jsx)(i.TableHead,{className:"text-right",children:"操作"})]})}),(0,b.jsx)(i.TableBody,{children:X.map(a=>(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableCell,{className:"font-mono",children:a.id}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(f.Badge,{variant:"outline",children:a.type})}),(0,b.jsx)(i.TableCell,{className:"font-mono text-primary",children:a.bizNo}),(0,b.jsx)(i.TableCell,{children:a.department}),(0,b.jsx)(i.TableCell,{children:a.subject}),(0,b.jsx)(i.TableCell,{children:a.applicant}),(0,b.jsx)(i.TableCell,{className:"text-right font-medium",children:a.amount}),(0,b.jsx)(i.TableCell,{className:"text-center",children:(0,b.jsx)(f.Badge,{className:"occupied"===a.status?"bg-warning/20 text-warning":"deducted"===a.status?"bg-destructive/20 text-destructive":"bg-success/20 text-success",children:"occupied"===a.status?"预占用":"deducted"===a.status?"已扣减":"已释放"})}),(0,b.jsx)(i.TableCell,{className:"text-muted-foreground",children:a.time}),(0,b.jsx)(i.TableCell,{className:"text-right",children:(0,b.jsxs)(y.DropdownMenu,{children:[(0,b.jsx)(y.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(w.MoreHorizontal,{className:"w-4 h-4"})})}),(0,b.jsxs)(y.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(y.DropdownMenuItem,{onClick:()=>{U(a),Q(!0)},children:[(0,b.jsx)(t.Eye,{className:"w-4 h-4 mr-2"}),"查看详情"]}),(0,b.jsxs)(y.DropdownMenuItem,{onClick:()=>window.open("#","_blank"),children:[(0,b.jsx)(x.FileText,{className:"w-4 h-4 mr-2"}),"查看原单据"]}),"occupied"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(y.DropdownMenuItem,{onClick:()=>{I(b=>b.map(b=>b.id===a.id?{...b,status:"deducted"}:b))},children:[(0,b.jsx)(v.ArrowRightLeft,{className:"w-4 h-4 mr-2"}),"强制扣减"]}),(0,b.jsxs)(y.DropdownMenuItem,{onClick:()=>{U(a),S(!0)},children:[(0,b.jsx)(p,{className:"w-4 h-4 mr-2"}),"释放额度"]})]})]})]})})]},a.id))})]})})]})}),(0,b.jsx)(m.TabsContent,{value:"trend",className:"mt-4",children:(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{className:"pb-3",children:(0,b.jsx)(e.CardTitle,{className:"text-base font-medium",children:"占用趋势分析"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"h-[400px]",children:(0,b.jsx)(F.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(z.AreaChart,{data:H,children:[(0,b.jsx)(D.CartesianGrid,{strokeDasharray:"3 3",stroke:"var(--border)"}),(0,b.jsx)(B.XAxis,{dataKey:"date",stroke:"var(--muted-foreground)",fontSize:12}),(0,b.jsx)(C.YAxis,{stroke:"var(--muted-foreground)",fontSize:12}),(0,b.jsx)(E.Tooltip,{contentStyle:{backgroundColor:"var(--card)",border:"1px solid var(--border)",borderRadius:"8px"}}),(0,b.jsx)(A.Area,{type:"monotone",dataKey:"occupied",stackId:"1",stroke:"#eab308",fill:"#eab308",fillOpacity:.6,name:"预占用"}),(0,b.jsx)(A.Area,{type:"monotone",dataKey:"deducted",stackId:"1",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6,name:"已扣减"}),(0,b.jsx)(A.Area,{type:"monotone",dataKey:"released",stackId:"1",stroke:"#22c55e",fill:"#22c55e",fillOpacity:.6,name:"已释放"})]})})})})]})})]}),(0,b.jsx)(j.Dialog,{open:P,onOpenChange:Q,children:(0,b.jsxs)(j.DialogContent,{children:[(0,b.jsx)(j.DialogHeader,{children:(0,b.jsx)(j.DialogTitle,{children:"占用详情"})}),T&&(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"占用编号"}),(0,b.jsx)("p",{className:"font-mono font-medium",children:T.id})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"业务单号"}),(0,b.jsx)("p",{className:"font-mono font-medium text-primary",children:T.bizNo})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"业务类型"}),(0,b.jsx)("p",{className:"font-medium",children:T.type})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"部门"}),(0,b.jsx)("p",{className:"font-medium",children:T.department})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"预算科目"}),(0,b.jsx)("p",{className:"font-medium",children:T.subject})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"申请人"}),(0,b.jsx)("p",{className:"font-medium",children:T.applicant})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"占用金额"}),(0,b.jsxs)("p",{className:"font-medium text-lg",children:["¥",T.amount,"万"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"当前状态"}),(0,b.jsx)(f.Badge,{className:"occupied"===T.status?"bg-warning/20 text-warning":"deducted"===T.status?"bg-destructive/20 text-destructive":"bg-success/20 text-success",children:"occupied"===T.status?"预占用":"deducted"===T.status?"已扣减":"已释放"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"占用时间"}),(0,b.jsx)("p",{className:"font-medium",children:T.time})]}),T.releaseTime&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"释放时间"}),(0,b.jsx)("p",{className:"font-medium",children:T.releaseTime})]})]}),T.remark&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"备注"}),(0,b.jsx)("p",{className:"font-medium",children:T.remark})]})]}),(0,b.jsx)(j.DialogFooter,{children:(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>Q(!1),children:"关闭"})})]})}),(0,b.jsx)(k.AlertDialog,{open:R,onOpenChange:S,children:(0,b.jsxs)(k.AlertDialogContent,{children:[(0,b.jsxs)(k.AlertDialogHeader,{children:[(0,b.jsx)(k.AlertDialogTitle,{children:"确认释放预算额度"}),(0,b.jsxs)(k.AlertDialogDescription,{children:["确定要释放此预占用的预算额度吗？释放后，该金额将恢复到可用预算中。",T&&(0,b.jsxs)("div",{className:"mt-4 p-3 bg-secondary rounded-lg",children:[(0,b.jsxs)("p",{children:["单据号：",T.bizNo]}),(0,b.jsxs)("p",{children:["金额：¥",T.amount,"万"]})]})]})]}),(0,b.jsxs)(k.AlertDialogFooter,{children:[(0,b.jsx)(k.AlertDialogCancel,{children:"取消"}),(0,b.jsx)(k.AlertDialogAction,{className:"bg-primary hover:bg-primary/90",onClick:()=>{T&&(I(a=>a.map(a=>a.id===T.id?{...a,status:"released",releaseTime:new Date().toLocaleString()}:a)),S(!1),U(null))},children:"确认释放"})]})]})})]})})}a.s(["default",()=>I],96908)}];

//# sourceMappingURL=app_control_occupation_page_tsx_717a03d4._.js.map